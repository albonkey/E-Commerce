{"ast":null,"code":"var _jsxFileName = \"/Users/carlsolli/Desktop/Projects/Webshop/webshop/src/components/CheckoutScreen/CheckoutScreen.js\";\nimport React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport { useSelector } from 'react-redux';\nimport InformationForm from '../InformationForm/InformationForm';\nimport CheckoutSteps from '../CheckoutSteps/CheckoutSteps';\nimport ShippingOptions from '../ShippingOptions/ShippingOptions';\nimport PaymentOptions from '../PaymentOptions/PaymentOptions';\nimport CartItem from '../CartItem/CartItem';\nimport CheckoutItemCard from '../CheckoutItemCard/CheckoutItemCard';\nimport './CheckoutScreen.css';\n\nconst CheckoutScreen = props => {\n  const cart = useSelector(state => state.cart);\n  console.log(cart);\n  const {\n    cartItems\n  } = cart;\n  const [subTotal, setSubTotal] = useState(cartItems.reduce((a, c) => a + c.price * c.qty, 0));\n  const [tax, setTax] = useState(0);\n  const [shipping, setShipping] = useState({});\n  const total = Math.floor(100 * (subTotal + tax + shipping.cost)) / 100;\n\n  const reRoute = route => {\n    if (route === 'shipping') {\n      props.history.push('?step=shipping');\n    } else if (route === 'cart') {\n      props.history.push('/cart');\n    } else if (route === 'information') {\n      props.history.push('?step=information');\n    } else if (route === 'payment') {\n      props.history.push('?step=payment');\n    } else if (route === 'orderSummary') {\n      props.history.push('/orderSummary');\n    } else {\n      props.history.push('/');\n    }\n  };\n\n  const params = queryString.parse(props.location.search);\n  useEffect(() => {\n    setTax(Math.floor(100 * (subTotal * (cart.checkoutInfo.state === 'California' ? 0.095 : 0))) / 100);\n    setShipping(Math.floor(100 * (subTotal * (cart.checkoutInfo.state === 'California' ? 0.095 : 0))) / 100);\n  }, [cart]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-screen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, \"Check out\"), /*#__PURE__*/React.createElement(CheckoutSteps, {\n    step1: true,\n    step2: true,\n    step3: true,\n    reRoute: reRoute,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }), params.step === 'information' && /*#__PURE__*/React.createElement(InformationForm, {\n    reRoute: reRoute,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 45\n    }\n  }), params.step === 'shipping' && /*#__PURE__*/React.createElement(ShippingOptions, {\n    reRoute: reRoute,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 42\n    }\n  }), params.step === 'payment' && /*#__PURE__*/React.createElement(PaymentOptions, {\n    reRoute: reRoute,\n    total: total,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \"Order Info\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-items-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, cartItems.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, \" Cart is Empty.\") : cartItems.map((cartItem, i) => /*#__PURE__*/React.createElement(CheckoutItemCard, {\n    item: cartItem,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-subtotal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, \"Subtotal\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"$\", subTotal)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, \"$\", tax)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \"Shipping\"), params.step === 'payment' ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, \"$ \", shipping.cost) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, \"Calculated at next step\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"USD $\", total)))));\n};\n\nexport default CheckoutScreen;","map":{"version":3,"sources":["/Users/carlsolli/Desktop/Projects/Webshop/webshop/src/components/CheckoutScreen/CheckoutScreen.js"],"names":["React","useState","useEffect","queryString","useSelector","InformationForm","CheckoutSteps","ShippingOptions","PaymentOptions","CartItem","CheckoutItemCard","CheckoutScreen","props","cart","state","console","log","cartItems","subTotal","setSubTotal","reduce","a","c","price","qty","tax","setTax","shipping","setShipping","total","Math","floor","cost","reRoute","route","history","push","params","parse","location","search","checkoutInfo","step","length","map","cartItem","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport { useSelector } from 'react-redux';\nimport InformationForm from '../InformationForm/InformationForm';\nimport CheckoutSteps from '../CheckoutSteps/CheckoutSteps';\nimport ShippingOptions from '../ShippingOptions/ShippingOptions';\nimport PaymentOptions from '../PaymentOptions/PaymentOptions';\nimport CartItem from '../CartItem/CartItem';\nimport CheckoutItemCard from '../CheckoutItemCard/CheckoutItemCard';\nimport './CheckoutScreen.css';\n\nconst CheckoutScreen = (props) => {\n  const cart = useSelector(state => state.cart);\n  console.log(cart);\n  const { cartItems } = cart;\n  const [subTotal, setSubTotal] = useState(cartItems.reduce((a, c) =>  a + c.price * c.qty, 0));\n  const [tax, setTax] = useState(0);\n  const [shipping, setShipping] = useState({});\n  const total = Math.floor(100 * (subTotal + tax + shipping.cost))/100;\n\n  const reRoute = (route) => {\n    if(route === 'shipping'){\n      props.history.push('?step=shipping');\n    } else if(route === 'cart'){\n      props.history.push('/cart');\n    } else if (route === 'information'){\n      props.history.push('?step=information');\n    } else if (route === 'payment'){\n      props.history.push('?step=payment');\n    } else if (route === 'orderSummary'){\n      props.history.push('/orderSummary');\n    } else {\n      props.history.push('/');\n    }\n  }\n\n  const params = queryString.parse(props.location.search);\n\n  useEffect(() => {\n      setTax(Math.floor(100*(subTotal * (cart.checkoutInfo.state === 'California' ? 0.095 : 0)))/100);\n      setShipping(Math.floor(100*(subTotal * (cart.checkoutInfo.state === 'California' ? 0.095 : 0)))/100);\n  },[cart])\n\n  return(\n    <div className='checkout-screen'>\n      <div className='checkout-action'>\n        <h3>Check out</h3>\n        <CheckoutSteps step1 step2 step3 reRoute={reRoute}/>\n\n          {params.step === 'information' && <InformationForm reRoute={reRoute} />}\n          {params.step === 'shipping' && <ShippingOptions reRoute={reRoute}/>}\n          {params.step === 'payment' && <PaymentOptions reRoute={reRoute} total={total}/>}\n\n\n      </div>\n      <div className='checkout-info'>\n        <h3>Order Info</h3>\n        <div className='checkout-items-list'>\n          {\n          cartItems.length === 0 ?\n            <div> Cart is Empty.</div> :\n            cartItems.map((cartItem, i) =>\n              <CheckoutItemCard item={cartItem} key={i}  />\n            )\n          }\n        </div>\n        <div className='checkout-subtotal'>\n          <div className='space-between'>\n            <p>Subtotal</p>\n            <p>${subTotal}</p>\n          </div>\n          <div className='space-between'>\n            <p>Tax</p>\n            <p>${tax}</p>\n          </div>\n          <div className='space-between'>\n            <p>Shipping</p>\n            {\n              params.step === 'payment' ?\n              <p>$ {shipping.cost}</p> :\n              <p>Calculated at next step</p>\n            }\n          </div>\n        </div>\n        <div className='checkout-total'>\n          <div className='space-between'>\n            <p>Total</p>\n            <p>USD ${total }</p>\n          </div>\n        </div>\n\n      </div>\n\n\n    </div>\n  );\n}\n\nexport default CheckoutScreen;\n"]},"metadata":{},"sourceType":"module"}